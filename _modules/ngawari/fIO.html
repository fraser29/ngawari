

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ngawari.fIO &mdash; Ngawari 0.1.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=ca7ad2ea"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Ngawari
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#installation-methods">Installation Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#from-pypi-recommended">From PyPI (Recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#from-source">From Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#development-installation">Development Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#verifying-installation">Verifying Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#version-compatibility">Version Compatibility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#basic-concepts">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#creating-basic-geometry">Creating Basic Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#working-with-arrays">Working with Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#filtering-operations">Filtering Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#clipping-and-cutting">Clipping and Cutting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#file-i-o">File I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#mathematical-operations">Mathematical Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#complete-example">Complete Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#core-modules">Core Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/ftk.html">ftk - Mathematical and Utility Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIDOfClosestFloat"><code class="docutils literal notranslate"><span class="pre">getIDOfClosestFloat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getClosestFloat"><code class="docutils literal notranslate"><span class="pre">getClosestFloat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIDOfClosestPoint"><code class="docutils literal notranslate"><span class="pre">getIDOfClosestPoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getClosestPoint"><code class="docutils literal notranslate"><span class="pre">getClosestPoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.distPointPoints"><code class="docutils literal notranslate"><span class="pre">distPointPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.squareDistPointPoints"><code class="docutils literal notranslate"><span class="pre">squareDistPointPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.sortedIDsOfClosestPoints"><code class="docutils literal notranslate"><span class="pre">sortedIDsOfClosestPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.distTwoPoints"><code class="docutils literal notranslate"><span class="pre">distTwoPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIDsOfClosestPoints"><code class="docutils literal notranslate"><span class="pre">getIDsOfClosestPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIDsOfFartherestPoints"><code class="docutils literal notranslate"><span class="pre">getIDsOfFartherestPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.vectorMagnitudes"><code class="docutils literal notranslate"><span class="pre">vectorMagnitudes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.normaliseArray"><code class="docutils literal notranslate"><span class="pre">normaliseArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.angleBetween2Vec"><code class="docutils literal notranslate"><span class="pre">angleBetween2Vec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.angleBetweenVecAndPlane"><code class="docutils literal notranslate"><span class="pre">angleBetweenVecAndPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.areVecsMatching"><code class="docutils literal notranslate"><span class="pre">areVecsMatching()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.linearFit"><code class="docutils literal notranslate"><span class="pre">linearFit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitPlaneToPoints"><code class="docutils literal notranslate"><span class="pre">fitPlaneToPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.polyfit2d"><code class="docutils literal notranslate"><span class="pre">polyfit2d()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.polyval2d"><code class="docutils literal notranslate"><span class="pre">polyval2d()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.projectPtsToPlane"><code class="docutils literal notranslate"><span class="pre">projectPtsToPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.project3DPointsToPlanarCoordinateSystem"><code class="docutils literal notranslate"><span class="pre">project3DPointsToPlanarCoordinateSystem()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.project3DPointsToPlanarCoordinateSystem_OLD"><code class="docutils literal notranslate"><span class="pre">project3DPointsToPlanarCoordinateSystem_OLD()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.project3DPointsToPlanarCoordinateSystem2"><code class="docutils literal notranslate"><span class="pre">project3DPointsToPlanarCoordinateSystem2()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.convert2DPointsTo3DCoordinateSystem"><code class="docutils literal notranslate"><span class="pre">convert2DPointsTo3DCoordinateSystem()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitCircle2D"><code class="docutils literal notranslate"><span class="pre">fitCircle2D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitCircleRANSAC"><code class="docutils literal notranslate"><span class="pre">fitCircleRANSAC()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitCircleRANSAC3D_xyz"><code class="docutils literal notranslate"><span class="pre">fitCircleRANSAC3D_xyz()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fit_ellipse_2d"><code class="docutils literal notranslate"><span class="pre">fit_ellipse_2d()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fit_ellipse_3d"><code class="docutils literal notranslate"><span class="pre">fit_ellipse_3d()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.buildCircle3D"><code class="docutils literal notranslate"><span class="pre">buildCircle3D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitPlaneToPointCloud_RANSAC"><code class="docutils literal notranslate"><span class="pre">fitPlaneToPointCloud_RANSAC()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.deg2rad"><code class="docutils literal notranslate"><span class="pre">deg2rad()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.rad2deg"><code class="docutils literal notranslate"><span class="pre">rad2deg()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.rotateArray"><code class="docutils literal notranslate"><span class="pre">rotateArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.rotationMatrixFromThreeAngles"><code class="docutils literal notranslate"><span class="pre">rotationMatrixFromThreeAngles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getClosestInSortedList"><code class="docutils literal notranslate"><span class="pre">getClosestInSortedList()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIdOfClosestFloat"><code class="docutils literal notranslate"><span class="pre">getIdOfClosestFloat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.polar2Cart"><code class="docutils literal notranslate"><span class="pre">polar2Cart()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.polar2z"><code class="docutils literal notranslate"><span class="pre">polar2z()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.z2Polar"><code class="docutils literal notranslate"><span class="pre">z2Polar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.cart2Polar"><code class="docutils literal notranslate"><span class="pre">cart2Polar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.unit_vector"><code class="docutils literal notranslate"><span class="pre">unit_vector()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.vecFromPtToLine"><code class="docutils literal notranslate"><span class="pre">vecFromPtToLine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fcdot"><code class="docutils literal notranslate"><span class="pre">fcdot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.cosineDifferenceBetweenTwoMats"><code class="docutils literal notranslate"><span class="pre">cosineDifferenceBetweenTwoMats()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getVectorComponentAlongRefVec"><code class="docutils literal notranslate"><span class="pre">getVectorComponentAlongRefVec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getVectorComponentAlongRefVec_Mag"><code class="docutils literal notranslate"><span class="pre">getVectorComponentAlongRefVec_Mag()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getVectorComponentNormalToRefVec"><code class="docutils literal notranslate"><span class="pre">getVectorComponentNormalToRefVec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.closeCurve"><code class="docutils literal notranslate"><span class="pre">closeCurve()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.splinePoints"><code class="docutils literal notranslate"><span class="pre">splinePoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.splineFunction"><code class="docutils literal notranslate"><span class="pre">splineFunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.splineXY"><code class="docutils literal notranslate"><span class="pre">splineXY()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.splineCurve"><code class="docutils literal notranslate"><span class="pre">splineCurve()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getMaxsMinsInflections"><code class="docutils literal notranslate"><span class="pre">getMaxsMinsInflections()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.sigmoidFunction"><code class="docutils literal notranslate"><span class="pre">sigmoidFunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.extractContinuousSegFromPeriodic"><code class="docutils literal notranslate"><span class="pre">extractContinuousSegFromPeriodic()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitGaussianToData"><code class="docutils literal notranslate"><span class="pre">fitGaussianToData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.gaussianFunction"><code class="docutils literal notranslate"><span class="pre">gaussianFunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculate_signed_area_2d"><code class="docutils literal notranslate"><span class="pre">calculate_signed_area_2d()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.isClosedPolygonClockwise"><code class="docutils literal notranslate"><span class="pre">isClosedPolygonClockwise()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.ensureClosedPolyIsClockwise"><code class="docutils literal notranslate"><span class="pre">ensureClosedPolyIsClockwise()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.setFirstPtOfPolygon"><code class="docutils literal notranslate"><span class="pre">setFirstPtOfPolygon()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.reorderPointsStartClosestToX"><code class="docutils literal notranslate"><span class="pre">reorderPointsStartClosestToX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.reorderPointsStatingAti"><code class="docutils literal notranslate"><span class="pre">reorderPointsStatingAti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.sortPointsByClosest_RETURNIDs"><code class="docutils literal notranslate"><span class="pre">sortPointsByClosest_RETURNIDs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.sortPointsByClosest"><code class="docutils literal notranslate"><span class="pre">sortPointsByClosest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.cumulativeDistanceAlongLine"><code class="docutils literal notranslate"><span class="pre">cumulativeDistanceAlongLine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getIdOfPointClosestToX"><code class="docutils literal notranslate"><span class="pre">getIdOfPointClosestToX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getPolygonMeanRadius"><code class="docutils literal notranslate"><span class="pre">getPolygonMeanRadius()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getPolygonMeanDiameter"><code class="docutils literal notranslate"><span class="pre">getPolygonMeanDiameter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getPolygonCenterPoint"><code class="docutils literal notranslate"><span class="pre">getPolygonCenterPoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.lineMagnitude"><code class="docutils literal notranslate"><span class="pre">lineMagnitude()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.distancePointToLineSegPerpendicular"><code class="docutils literal notranslate"><span class="pre">distancePointToLineSegPerpendicular()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.ndarrayToListOfTuple3"><code class="docutils literal notranslate"><span class="pre">ndarrayToListOfTuple3()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.diff"><code class="docutils literal notranslate"><span class="pre">diff()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.circleFit2DErr"><code class="docutils literal notranslate"><span class="pre">circleFit2DErr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.distanceToPlane"><code class="docutils literal notranslate"><span class="pre">distanceToPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.residualPlane"><code class="docutils literal notranslate"><span class="pre">residualPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.residualsCircle"><code class="docutils literal notranslate"><span class="pre">residualsCircle()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.icp"><code class="docutils literal notranslate"><span class="pre">icp()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitPlane3DOptimize"><code class="docutils literal notranslate"><span class="pre">fitPlane3DOptimize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.fitCircle3D"><code class="docutils literal notranslate"><span class="pre">fitCircle3D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.lagBetweenTwoCurves"><code class="docutils literal notranslate"><span class="pre">lagBetweenTwoCurves()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculatePlaneThreePoints"><code class="docutils literal notranslate"><span class="pre">calculatePlaneThreePoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.getPlaneConstantsFromPointAndVector"><code class="docutils literal notranslate"><span class="pre">getPlaneConstantsFromPointAndVector()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculateDerivativeOnLine_backwardDiff"><code class="docutils literal notranslate"><span class="pre">calculateDerivativeOnLine_backwardDiff()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculateSecondDerivativeOnLine"><code class="docutils literal notranslate"><span class="pre">calculateSecondDerivativeOnLine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculateCurvature3Pts"><code class="docutils literal notranslate"><span class="pre">calculateCurvature3Pts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculateCurvature_D"><code class="docutils literal notranslate"><span class="pre">calculateCurvature_D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.setVectorDirection"><code class="docutils literal notranslate"><span class="pre">setVectorDirection()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.buildRotationMatrix"><code class="docutils literal notranslate"><span class="pre">buildRotationMatrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.adjustPointsCenterOfMassToOrigin"><code class="docutils literal notranslate"><span class="pre">adjustPointsCenterOfMassToOrigin()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.areVecsConsistent"><code class="docutils literal notranslate"><span class="pre">areVecsConsistent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.setVecAConsitentWithVecB"><code class="docutils literal notranslate"><span class="pre">setVecAConsitentWithVecB()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.buildConvexHUll3D"><code class="docutils literal notranslate"><span class="pre">buildConvexHUll3D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.orderPointsConvexHull_IDs"><code class="docutils literal notranslate"><span class="pre">orderPointsConvexHull_IDs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.orderPointsConvexHull"><code class="docutils literal notranslate"><span class="pre">orderPointsConvexHull()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.groupContinuousLinesByTol"><code class="docutils literal notranslate"><span class="pre">groupContinuousLinesByTol()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.buildContinuousLineByClosestPt"><code class="docutils literal notranslate"><span class="pre">buildContinuousLineByClosestPt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.accumulatedAverage"><code class="docutils literal notranslate"><span class="pre">accumulatedAverage()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.interpolateNANsFromSurroundingValues_cubic"><code class="docutils literal notranslate"><span class="pre">interpolateNANsFromSurroundingValues_cubic()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.doesLineSegPierceTriangle"><code class="docutils literal notranslate"><span class="pre">doesLineSegPierceTriangle()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.doesLinePierceTriangle"><code class="docutils literal notranslate"><span class="pre">doesLinePierceTriangle()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.pluckerSideOperator"><code class="docutils literal notranslate"><span class="pre">pluckerSideOperator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.pluckerLine"><code class="docutils literal notranslate"><span class="pre">pluckerLine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.doesVectorPierceAnyTriangle"><code class="docutils literal notranslate"><span class="pre">doesVectorPierceAnyTriangle()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.calculateBSA"><code class="docutils literal notranslate"><span class="pre">calculateBSA()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.interpolateNANsFromSurroundingValues_linear"><code class="docutils literal notranslate"><span class="pre">interpolateNANsFromSurroundingValues_linear()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#ngawari.ftk.convexHull"><code class="docutils literal notranslate"><span class="pre">convexHull()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#vector-operations">Vector Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#matrix-operations">Matrix Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#geometric-calculations">Geometric Calculations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#point-and-line-utilities">Point and Line Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ftk.html#mathematical-transformations">Mathematical Transformations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/fIO.html">fIO - File Input/Output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.remove_symbols"><code class="docutils literal notranslate"><span class="pre">remove_symbols()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.remove_not_allowed"><code class="docutils literal notranslate"><span class="pre">remove_not_allowed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.countFilesInDir"><code class="docutils literal notranslate"><span class="pre">countFilesInDir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.getAllFilesUnderDir"><code class="docutils literal notranslate"><span class="pre">getAllFilesUnderDir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.parseFileToTagsDictionary"><code class="docutils literal notranslate"><span class="pre">parseFileToTagsDictionary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeDictionaryToFile"><code class="docutils literal notranslate"><span class="pre">writeDictionaryToFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.NumpyEncoder"><code class="docutils literal notranslate"><span class="pre">NumpyEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeDictionaryToJSON"><code class="docutils literal notranslate"><span class="pre">writeDictionaryToJSON()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.parseJsonToDictionary"><code class="docutils literal notranslate"><span class="pre">parseJsonToDictionary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.strListToFloatList"><code class="docutils literal notranslate"><span class="pre">strListToFloatList()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.xmlIndent"><code class="docutils literal notranslate"><span class="pre">xmlIndent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.findAndReplaceTextInFile"><code class="docutils literal notranslate"><span class="pre">findAndReplaceTextInFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readFileToListOfLines"><code class="docutils literal notranslate"><span class="pre">readFileToListOfLines()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.appendFiles"><code class="docutils literal notranslate"><span class="pre">appendFiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pickleData"><code class="docutils literal notranslate"><span class="pre">pickleData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.unpickleData"><code class="docutils literal notranslate"><span class="pre">unpickleData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.tarGZLocal_AndMove"><code class="docutils literal notranslate"><span class="pre">tarGZLocal_AndMove()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.addSuffixToName"><code class="docutils literal notranslate"><span class="pre">addSuffixToName()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.checkIfExtnPresent"><code class="docutils literal notranslate"><span class="pre">checkIfExtnPresent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readDataCSV"><code class="docutils literal notranslate"><span class="pre">readDataCSV()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeCSVFile"><code class="docutils literal notranslate"><span class="pre">writeCSVFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.detectDelimiter"><code class="docutils literal notranslate"><span class="pre">detectDelimiter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writePlyFile"><code class="docutils literal notranslate"><span class="pre">writePlyFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeVTKFile"><code class="docutils literal notranslate"><span class="pre">writeVTKFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readVTKFile"><code class="docutils literal notranslate"><span class="pre">readVTKFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.nii_to_niigz"><code class="docutils literal notranslate"><span class="pre">nii_to_niigz()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeNifti"><code class="docutils literal notranslate"><span class="pre">writeNifti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readNifti"><code class="docutils literal notranslate"><span class="pre">readNifti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readNRRD"><code class="docutils literal notranslate"><span class="pre">readNRRD()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeVTK_PVD_Dict"><code class="docutils literal notranslate"><span class="pre">writeVTK_PVD_Dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdAddTimeToFieldData"><code class="docutils literal notranslate"><span class="pre">pvdAddTimeToFieldData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.writeZipFromVTK_PVD_Dict"><code class="docutils literal notranslate"><span class="pre">writeZipFromVTK_PVD_Dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.deleteFilesByPVD"><code class="docutils literal notranslate"><span class="pre">deleteFilesByPVD()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readPVDFileName"><code class="docutils literal notranslate"><span class="pre">readPVDFileName()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readImageFileToDict"><code class="docutils literal notranslate"><span class="pre">readImageFileToDict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.readPVD"><code class="docutils literal notranslate"><span class="pre">readPVD()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetDict"><code class="docutils literal notranslate"><span class="pre">pvdGetDict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetClosestTimeToT"><code class="docutils literal notranslate"><span class="pre">pvdGetClosestTimeToT()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetTimes"><code class="docutils literal notranslate"><span class="pre">pvdGetTimes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetIdOfT"><code class="docutils literal notranslate"><span class="pre">pvdGetIdOfT()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetFileAtT"><code class="docutils literal notranslate"><span class="pre">pvdGetFileAtT()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetNumberTimePoints"><code class="docutils literal notranslate"><span class="pre">pvdGetNumberTimePoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetDataFileRoot_Prefix_and_Ext"><code class="docutils literal notranslate"><span class="pre">pvdGetDataFileRoot_Prefix_and_Ext()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdGetDataClosestTo"><code class="docutils literal notranslate"><span class="pre">pvdGetDataClosestTo()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdMultiply"><code class="docutils literal notranslate"><span class="pre">pvdMultiply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdReverse"><code class="docutils literal notranslate"><span class="pre">pvdReverse()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdRestart_t"><code class="docutils literal notranslate"><span class="pre">pvdRestart_t()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdRestart"><code class="docutils literal notranslate"><span class="pre">pvdRestart()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdClip"><code class="docutils literal notranslate"><span class="pre">pvdClip()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdResetTimes"><code class="docutils literal notranslate"><span class="pre">pvdResetTimes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdResetStartPoint_Id"><code class="docutils literal notranslate"><span class="pre">pvdResetStartPoint_Id()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdResetStartPoint"><code class="docutils literal notranslate"><span class="pre">pvdResetStartPoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.pvdAddStartPointAtEndForPeriodicy"><code class="docutils literal notranslate"><span class="pre">pvdAddStartPointAtEndForPeriodicy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#ngawari.fIO.buildPVD_WaterFallRestarts"><code class="docutils literal notranslate"><span class="pre">buildPVD_WaterFallRestarts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#vtk-file-formats">VTK File Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#other-file-formats">Other File Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#pvd-file-operations">PVD File Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#data-conversion">Data Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/fIO.html#batch-processing">Batch Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/vtkfilters.html">vtkfilters - VTK Filtering and Processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.isVTI"><code class="docutils literal notranslate"><span class="pre">isVTI()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.isVTP"><code class="docutils literal notranslate"><span class="pre">isVTP()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.isVTS"><code class="docutils literal notranslate"><span class="pre">isVTS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.angleBetweenTwoVectors"><code class="docutils literal notranslate"><span class="pre">angleBetweenTwoVectors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getArrayNames"><code class="docutils literal notranslate"><span class="pre">getArrayNames()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getArray"><code class="docutils literal notranslate"><span class="pre">getArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getScalarsArrayName"><code class="docutils literal notranslate"><span class="pre">getScalarsArrayName()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVectorsArrayName"><code class="docutils literal notranslate"><span class="pre">getVectorsArrayName()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getArrayId"><code class="docutils literal notranslate"><span class="pre">getArrayId()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.renameArray"><code class="docutils literal notranslate"><span class="pre">renameArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getArrayAsNumpy"><code class="docutils literal notranslate"><span class="pre">getArrayAsNumpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getScalarsAsNumpy"><code class="docutils literal notranslate"><span class="pre">getScalarsAsNumpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.setArrayFromNumpy"><code class="docutils literal notranslate"><span class="pre">setArrayFromNumpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.addNpArray"><code class="docutils literal notranslate"><span class="pre">addNpArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.setArrayDtype"><code class="docutils literal notranslate"><span class="pre">setArrayDtype()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.setArrayAsScalars"><code class="docutils literal notranslate"><span class="pre">setArrayAsScalars()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.setArrayAsVectors"><code class="docutils literal notranslate"><span class="pre">setArrayAsVectors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.ensureScalarsSet"><code class="docutils literal notranslate"><span class="pre">ensureScalarsSet()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.delArray"><code class="docutils literal notranslate"><span class="pre">delArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.delArraysExcept"><code class="docutils literal notranslate"><span class="pre">delArraysExcept()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.addFieldData"><code class="docutils literal notranslate"><span class="pre">addFieldData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getFieldData"><code class="docutils literal notranslate"><span class="pre">getFieldData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getFieldDataDict"><code class="docutils literal notranslate"><span class="pre">getFieldDataDict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getFieldDataNames"><code class="docutils literal notranslate"><span class="pre">getFieldDataNames()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.duplicateFieldData"><code class="docutils literal notranslate"><span class="pre">duplicateFieldData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.deleteFieldData"><code class="docutils literal notranslate"><span class="pre">deleteFieldData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVtkPointsAsNumpy"><code class="docutils literal notranslate"><span class="pre">getVtkPointsAsNumpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPtsAsNumpy"><code class="docutils literal notranslate"><span class="pre">getPtsAsNumpy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getCellCenters"><code class="docutils literal notranslate"><span class="pre">getCellCenters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildImplicitSphere"><code class="docutils literal notranslate"><span class="pre">buildImplicitSphere()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildSphereSource"><code class="docutils literal notranslate"><span class="pre">buildSphereSource()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildCylinderSource"><code class="docutils literal notranslate"><span class="pre">buildCylinderSource()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildImplicitBox"><code class="docutils literal notranslate"><span class="pre">buildImplicitBox()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildCubeSource"><code class="docutils literal notranslate"><span class="pre">buildCubeSource()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPolyLineBetweenTwoPoints"><code class="docutils literal notranslate"><span class="pre">buildPolyLineBetweenTwoPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPolyTrianglesAtCp"><code class="docutils literal notranslate"><span class="pre">buildPolyTrianglesAtCp()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPlaneCentredOnRoi"><code class="docutils literal notranslate"><span class="pre">buildPlaneCentredOnRoi()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPlaneCentredOnSphere"><code class="docutils literal notranslate"><span class="pre">buildPlaneCentredOnSphere()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPlanePtAndNorm"><code class="docutils literal notranslate"><span class="pre">buildPlanePtAndNorm()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPlaneCentredOnO"><code class="docutils literal notranslate"><span class="pre">buildPlaneCentredOnO()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPlaneSource"><code class="docutils literal notranslate"><span class="pre">buildPlaneSource()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPolyLineFromXYZ_spline"><code class="docutils literal notranslate"><span class="pre">buildPolyLineFromXYZ_spline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPolyLineFromXYZ"><code class="docutils literal notranslate"><span class="pre">buildPolyLineFromXYZ()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildPolydataFromXYZ"><code class="docutils literal notranslate"><span class="pre">buildPolydataFromXYZ()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedByCircle"><code class="docutils literal notranslate"><span class="pre">clippedByCircle()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.sliceByPlane"><code class="docutils literal notranslate"><span class="pre">sliceByPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getDataCutByPlane"><code class="docutils literal notranslate"><span class="pre">getDataCutByPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolyDataClippedByROI"><code class="docutils literal notranslate"><span class="pre">getPolyDataClippedByROI()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolyDataClippedByBox"><code class="docutils literal notranslate"><span class="pre">getPolyDataClippedByBox()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolyDataClippedBySphere"><code class="docutils literal notranslate"><span class="pre">getPolyDataClippedBySphere()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedByPolyData"><code class="docutils literal notranslate"><span class="pre">clippedByPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.doesLinePierceTri"><code class="docutils literal notranslate"><span class="pre">doesLinePierceTri()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.doesLinePiercePolygon"><code class="docutils literal notranslate"><span class="pre">doesLinePiercePolygon()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedByPlane"><code class="docutils literal notranslate"><span class="pre">clippedByPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clipDataByPlane"><code class="docutils literal notranslate"><span class="pre">clipDataByPlane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedByPlaneClosedSurface"><code class="docutils literal notranslate"><span class="pre">clippedByPlaneClosedSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedBySphere"><code class="docutils literal notranslate"><span class="pre">clippedBySphere()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clippedByScalar"><code class="docutils literal notranslate"><span class="pre">clippedByScalar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clipVolumeToEightPolydataBoxes"><code class="docutils literal notranslate"><span class="pre">clipVolumeToEightPolydataBoxes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.roi_line_to_roi_plane"><code class="docutils literal notranslate"><span class="pre">roi_line_to_roi_plane()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.clipPlaneToROI"><code class="docutils literal notranslate"><span class="pre">clipPlaneToROI()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.vtiToVts"><code class="docutils literal notranslate"><span class="pre">vtiToVts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.vtsToVti"><code class="docutils literal notranslate"><span class="pre">vtsToVti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVtsOrigin"><code class="docutils literal notranslate"><span class="pre">getVtsOrigin()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVtsResolution"><code class="docutils literal notranslate"><span class="pre">getVtsResolution()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getResolution_VTI"><code class="docutils literal notranslate"><span class="pre">getResolution_VTI()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getDimsResOriginFromOutline"><code class="docutils literal notranslate"><span class="pre">getDimsResOriginFromOutline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildRawImageDataFromPolyData"><code class="docutils literal notranslate"><span class="pre">buildRawImageDataFromPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildRawImageDataFromOutline"><code class="docutils literal notranslate"><span class="pre">buildRawImageDataFromOutline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildRawImageDataFromOutline_dims"><code class="docutils literal notranslate"><span class="pre">buildRawImageDataFromOutline_dims()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.duplicateImageData"><code class="docutils literal notranslate"><span class="pre">duplicateImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.buildRawImageData"><code class="docutils literal notranslate"><span class="pre">buildRawImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.surf2ImageBW"><code class="docutils literal notranslate"><span class="pre">surf2ImageBW()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVarValueAtI_ImageData"><code class="docutils literal notranslate"><span class="pre">getVarValueAtI_ImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getImageX"><code class="docutils literal notranslate"><span class="pre">getImageX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.imageX_ToStructuredCoords"><code class="docutils literal notranslate"><span class="pre">imageX_ToStructuredCoords()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.imageIndex_ToStructuredCoords"><code class="docutils literal notranslate"><span class="pre">imageIndex_ToStructuredCoords()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getNeighbours26_fromImageIndex"><code class="docutils literal notranslate"><span class="pre">getNeighbours26_fromImageIndex()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.imageStrucCoords_toIndex"><code class="docutils literal notranslate"><span class="pre">imageStrucCoords_toIndex()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.imageStrucCoords_toX"><code class="docutils literal notranslate"><span class="pre">imageStrucCoords_toX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterFlipImageData"><code class="docutils literal notranslate"><span class="pre">filterFlipImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolyDataMeanFromCenter"><code class="docutils literal notranslate"><span class="pre">getPolyDataMeanFromCenter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.copyPolyData"><code class="docutils literal notranslate"><span class="pre">copyPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.copyData"><code class="docutils literal notranslate"><span class="pre">copyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.contourFilter"><code class="docutils literal notranslate"><span class="pre">contourFilter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.cleanData"><code class="docutils literal notranslate"><span class="pre">cleanData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.reduceNumberOfPoints"><code class="docutils literal notranslate"><span class="pre">reduceNumberOfPoints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterBoolean"><code class="docutils literal notranslate"><span class="pre">filterBoolean()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.tubeFilter"><code class="docutils literal notranslate"><span class="pre">tubeFilter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterVtpSpline"><code class="docutils literal notranslate"><span class="pre">filterVtpSpline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterTransformPolyData"><code class="docutils literal notranslate"><span class="pre">filterTransformPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.translatePoly_AxisA_To_AxisB"><code class="docutils literal notranslate"><span class="pre">translatePoly_AxisA_To_AxisB()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.transformPolydataA_to_B_ICP"><code class="docutils literal notranslate"><span class="pre">transformPolydataA_to_B_ICP()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.iterativeClosestPointsTransform"><code class="docutils literal notranslate"><span class="pre">iterativeClosestPointsTransform()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterWarpPolydataByVectors"><code class="docutils literal notranslate"><span class="pre">filterWarpPolydataByVectors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.transformImageData"><code class="docutils literal notranslate"><span class="pre">transformImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.pointToCellData"><code class="docutils literal notranslate"><span class="pre">pointToCellData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.cellToPointData"><code class="docutils literal notranslate"><span class="pre">cellToPointData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getOutline"><code class="docutils literal notranslate"><span class="pre">getOutline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getMaximumBounds"><code class="docutils literal notranslate"><span class="pre">getMaximumBounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.appendPolyData"><code class="docutils literal notranslate"><span class="pre">appendPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.appendPolyDataList"><code class="docutils literal notranslate"><span class="pre">appendPolyDataList()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.appendImageList"><code class="docutils literal notranslate"><span class="pre">appendImageList()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.appendUnstructured"><code class="docutils literal notranslate"><span class="pre">appendUnstructured()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.mergeTwoImageData"><code class="docutils literal notranslate"><span class="pre">mergeTwoImageData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.multiblockToList"><code class="docutils literal notranslate"><span class="pre">multiblockToList()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.idListToVtkIDs"><code class="docutils literal notranslate"><span class="pre">idListToVtkIDs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.extractCells"><code class="docutils literal notranslate"><span class="pre">extractCells()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.extractSelection"><code class="docutils literal notranslate"><span class="pre">extractSelection()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.delCellsByEdgeLength"><code class="docutils literal notranslate"><span class="pre">delCellsByEdgeLength()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.delCellsByID"><code class="docutils literal notranslate"><span class="pre">delCellsByID()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolylineLength"><code class="docutils literal notranslate"><span class="pre">getPolylineLength()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getLoopSubDivided"><code class="docutils literal notranslate"><span class="pre">getLoopSubDivided()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.decimateTris"><code class="docutils literal notranslate"><span class="pre">decimateTris()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.shrinkWrapData"><code class="docutils literal notranslate"><span class="pre">shrinkWrapData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.poissonRecon"><code class="docutils literal notranslate"><span class="pre">poissonRecon()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.pointCloudRemoveOutliers"><code class="docutils literal notranslate"><span class="pre">pointCloudRemoveOutliers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.smoothTris"><code class="docutils literal notranslate"><span class="pre">smoothTris()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.smoothTris_SINC"><code class="docutils literal notranslate"><span class="pre">smoothTris_SINC()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterExtractEdges"><code class="docutils literal notranslate"><span class="pre">filterExtractEdges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.isPolyDataWaterTight"><code class="docutils literal notranslate"><span class="pre">isPolyDataWaterTight()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.isPolyDataPolyLine"><code class="docutils literal notranslate"><span class="pre">isPolyDataPolyLine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.calculatePolyDataArea"><code class="docutils literal notranslate"><span class="pre">calculatePolyDataArea()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getPolyDataCenterPtNormal"><code class="docutils literal notranslate"><span class="pre">getPolyDataCenterPtNormal()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.addMagnitudeArray"><code class="docutils literal notranslate"><span class="pre">addMagnitudeArray()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.addNormalVelocities"><code class="docutils literal notranslate"><span class="pre">addNormalVelocities()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterDilateErode"><code class="docutils literal notranslate"><span class="pre">filterDilateErode()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterExtractSurface"><code class="docutils literal notranslate"><span class="pre">filterExtractSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterExtractTri"><code class="docutils literal notranslate"><span class="pre">filterExtractTri()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterTriangulate"><code class="docutils literal notranslate"><span class="pre">filterTriangulate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getVolumeSurfaceAreaOfPolyData"><code class="docutils literal notranslate"><span class="pre">getVolumeSurfaceAreaOfPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.mergeSurfsByPointsInsideVti"><code class="docutils literal notranslate"><span class="pre">mergeSurfsByPointsInsideVti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getTriangleAreaAndNormal"><code class="docutils literal notranslate"><span class="pre">getTriangleAreaAndNormal()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.addNormalsToPolyData"><code class="docutils literal notranslate"><span class="pre">addNormalsToPolyData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getBoundaryEdges"><code class="docutils literal notranslate"><span class="pre">getBoundaryEdges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getEdges"><code class="docutils literal notranslate"><span class="pre">getEdges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedCellIds"><code class="docutils literal notranslate"><span class="pre">getConnectedCellIds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.extractStructuredSubGrid"><code class="docutils literal notranslate"><span class="pre">extractStructuredSubGrid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.extractVOI"><code class="docutils literal notranslate"><span class="pre">extractVOI()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.extractVOI_fromFov"><code class="docutils literal notranslate"><span class="pre">extractVOI_fromFov()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterNullOutsideSurface"><code class="docutils literal notranslate"><span class="pre">filterNullOutsideSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterNullInsideSurface"><code class="docutils literal notranslate"><span class="pre">filterNullInsideSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterResampleToDataset"><code class="docutils literal notranslate"><span class="pre">filterResampleToDataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterResampleToImage"><code class="docutils literal notranslate"><span class="pre">filterResampleToImage()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getAxesDirectionCosinesForNormal"><code class="docutils literal notranslate"><span class="pre">getAxesDirectionCosinesForNormal()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterResliceImage"><code class="docutils literal notranslate"><span class="pre">filterResliceImage()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterVtiMedian"><code class="docutils literal notranslate"><span class="pre">filterVtiMedian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterImageGradient"><code class="docutils literal notranslate"><span class="pre">filterImageGradient()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterAnisotropicDiffusion"><code class="docutils literal notranslate"><span class="pre">filterAnisotropicDiffusion()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterSurfaceToImageStencil"><code class="docutils literal notranslate"><span class="pre">filterSurfaceToImageStencil()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterMaskImageBySurface"><code class="docutils literal notranslate"><span class="pre">filterMaskImageBySurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterGetPointsInsideSurface"><code class="docutils literal notranslate"><span class="pre">filterGetPointsInsideSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterGetPointIDsInsideSurface"><code class="docutils literal notranslate"><span class="pre">filterGetPointIDsInsideSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterGetPolydataInsideSurface"><code class="docutils literal notranslate"><span class="pre">filterGetPolydataInsideSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterGetEnclosedPts"><code class="docutils literal notranslate"><span class="pre">filterGetEnclosedPts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.filterGetArrayValuesWithinSurface"><code class="docutils literal notranslate"><span class="pre">filterGetArrayValuesWithinSurface()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getDataWithThreshold"><code class="docutils literal notranslate"><span class="pre">getDataWithThreshold()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.countPointsInVti"><code class="docutils literal notranslate"><span class="pre">countPointsInVti()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionLargest"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionLargest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionContaining"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionContaining()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionClosestToX"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionClosestToX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionClosestToX_UnStruct"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionClosestToX_UnStruct()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionAll"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionAll()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#ngawari.vtkfilters.getConnectedRegionMinDistToX"><code class="docutils literal notranslate"><span class="pre">getConnectedRegionMinDistToX()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#data-type-checkers">Data Type Checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#array-operations">Array Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#geometry-creation">Geometry Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#filtering-operations">Filtering Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#clipping-and-cutting">Clipping and Cutting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#image-data-operations">Image Data Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#surface-operations">Surface Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#data-conversion">Data Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/vtkfilters.html#utility-functions">Utility Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#module-overview">Module Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html#ftk-mathematical-and-utility-functions">ftk - Mathematical and Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html#fio-file-input-output">fIO - File Input/Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html#vtkfilters-vtk-filtering-and-processing">vtkfilters - VTK Filtering and Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#usage-examples">Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html#basic-import">Basic Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html#common-patterns">Common Patterns</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#basic-geometry-example">Basic Geometry Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#clipping-example">Clipping Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#image-data-example">Image Data Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#mathematical-operations-example">Mathematical Operations Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#file-i-o-example">File I/O Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to Ngawari</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#development-setup">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#code-style">Code Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#building-documentation">Building Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#issue-reporting">Issue Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ngawari</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">ngawari.fIO</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for ngawari.fIO</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">@author: Fraser M. Callaghan</span>

<span class="sd">Input / Output functions</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">unicodedata</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ud</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gzip</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">string</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">codecs</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">vtk</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">vtk.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">numpy_support</span> <span class="c1"># type: ignore</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">xml.etree.cElementTree</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ET</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">xml.etree.ElementTree</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ET</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tarfile</span>

<div class="viewcode-block" id="remove_symbols">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.remove_symbols">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">remove_symbols</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove symbols from the given text.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The input text to process.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The text with symbols removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">text</span> <span class="k">if</span> <span class="n">ud</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;So&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_not_allowed">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.remove_not_allowed">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">remove_not_allowed</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">allowed_characters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">printable</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove characters that are not in the allowed set.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The input text to process.</span>
<span class="sd">        allowed_characters (str): The set of characters to keep (default is all printable characters and some special (DE, FR) characters).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The text with disallowed characters removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">text</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">allowed_characters</span><span class="p">)</span></div>


<span class="c1"># =========================================================================</span>
<span class="c1">##          Utilities</span>
<span class="c1"># =========================================================================</span>
<div class="viewcode-block" id="countFilesInDir">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.countFilesInDir">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">countFilesInDir</span><span class="p">(</span><span class="n">dirName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Count the number of files in a directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        dirName (str): The path to the directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The number of files in the directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dirName</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">dirName</span><span class="p">):</span>  
            <span class="n">files</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span></div>


<div class="viewcode-block" id="getAllFilesUnderDir">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.getAllFilesUnderDir">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">getAllFilesUnderDir</span><span class="p">(</span><span class="n">dirName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get all file paths under a directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        dirName (str): The path to the directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: A list of full file paths.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dirName</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">dirName</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ifile</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">ifile</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">files</span></div>


<div class="viewcode-block" id="parseFileToTagsDictionary">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.parseFileToTagsDictionary">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">parseFileToTagsDictionary</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">equator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">commentor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">SPACE_REPLACE</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse a file to a dictionary of tags.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The name of the file to parse.</span>
<span class="sd">        equator (str, optional): The character used to separate keys and values. Defaults to &#39;=&#39;.</span>
<span class="sd">        commentor (str, optional): The character used to denote comments. Defaults to &#39;#&#39;.</span>
<span class="sd">        SPACE_REPLACE (bool, optional): Whether to replace spaces in keys with underscores. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the parsed tags and values.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - If the file ends with &#39;.json&#39;, it will be parsed as a JSON file instead.</span>
<span class="sd">        - Comments at the beginning of the file are stored under the &#39;header&#39; key.</span>
<span class="sd">        - Subsequent comments are stored as &#39;comment0&#39;, &#39;comment1&#39;, etc.</span>
<span class="sd">        - Empty lines and lines without the equator character are ignored.</span>
<span class="sd">        - Keys and values are stored as strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;json&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">parseJsonToDictionary</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">myDict</span><span class="p">,</span> <span class="n">commentNumber</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;header&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span> <span class="mi">0</span>
    <span class="n">HEADER_FLAG</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">lineIn</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lineIn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">lineIn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">commentor</span><span class="p">):</span>  <span class="c1">#  comments</span>
                        <span class="k">if</span> <span class="n">HEADER_FLAG</span><span class="p">:</span>
                            <span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">lineIn</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;comment</span><span class="si">%d</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">commentNumber</span><span class="p">)]</span> <span class="o">=</span> <span class="n">lineIn</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                            <span class="n">commentNumber</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">HEADER_FLAG</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">myEquals</span> <span class="o">=</span> <span class="n">lineIn</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">equator</span><span class="p">)</span>             <span class="c1"># Find = sign</span>
                        <span class="k">if</span> <span class="n">myEquals</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">myKey</span> <span class="o">=</span> <span class="n">lineIn</span><span class="p">[:</span><span class="n">myEquals</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="k">if</span> <span class="n">SPACE_REPLACE</span><span class="p">:</span>
                                <span class="n">myKey</span> <span class="o">=</span> <span class="n">myKey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
                            <span class="n">myValue</span> <span class="o">=</span> <span class="n">lineIn</span><span class="p">[</span><span class="n">myEquals</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="n">myValue</span> <span class="o">=</span> <span class="n">myValue</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">myDict</span><span class="p">[</span><span class="n">myKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">myValue</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="k">raise</span>
    <span class="k">if</span> <span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">myDict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">myDict</span></div>



<div class="viewcode-block" id="writeDictionaryToFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeDictionaryToFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeDictionaryToFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dictToWrite</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">equator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">commentor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">WRITE_COMMENTS</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write a dictionary to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The name of the file to write to (if json then calls writeDictionaryToJSON - json.dump with Numpy encoder).</span>
<span class="sd">        dictToWrite (dict): The dictionary to write to the file.</span>
<span class="sd">        equator (str, optional): The character used to separate keys and values. Defaults to &#39;=&#39;.</span>
<span class="sd">        commentor (str, optional): The character used to denote comments. Defaults to &#39;#&#39;.</span>
<span class="sd">        WRITE_COMMENTS (bool, optional): Whether to write comments to the file. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The name of the file written to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;json&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">writeDictionaryToJSON</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">dictToWrite</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">dictToWrite</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]))</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># no header</span>
        <span class="k">for</span> <span class="n">iKey</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dictToWrite</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="s1">&#39;comment&#39;</span> <span class="ow">in</span> <span class="n">iKey</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">WRITE_COMMENTS</span><span class="p">:</span>
                    <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">commentor</span><span class="p">,</span> <span class="n">remove_not_allowed</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dictToWrite</span><span class="p">[</span><span class="n">iKey</span><span class="p">]))))</span>
            <span class="k">elif</span> <span class="n">iKey</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;header&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">iKey</span><span class="p">,</span> <span class="n">equator</span><span class="p">,</span> <span class="n">remove_not_allowed</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dictToWrite</span><span class="p">[</span><span class="n">iKey</span><span class="p">]))))</span>
        <span class="k">return</span> <span class="n">fileName</span></div>



<div class="viewcode-block" id="NumpyEncoder">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.NumpyEncoder">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NumpyEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
<div class="viewcode-block" id="NumpyEncoder.default">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.NumpyEncoder.default">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">bool_</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floating</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">complexfloating</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">bytes_</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">floating</span><span class="p">))</span> <span class="k">else</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;None&quot;</span>  <span class="c1"># Convert None to string</span>
        <span class="c1"># Handle some bespoke general cases</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;to_dict&quot;</span><span class="p">):</span>  
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">):</span>  
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># Convert iterables like lists/tuples</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">NumpyEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="writeDictionaryToJSON">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeDictionaryToJSON">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeDictionaryToJSON</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dictToWrite</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dictToWrite</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">NumpyEncoder</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fileName</span></div>



<div class="viewcode-block" id="parseJsonToDictionary">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.parseJsonToDictionary">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">parseJsonToDictionary</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="n">myDict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fid</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">myDict</span></div>



<div class="viewcode-block" id="strListToFloatList">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.strListToFloatList">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">strListToFloatList</span><span class="p">(</span><span class="n">strList</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a string representation of a list to a list of floats.</span>

<span class="sd">    Args:</span>
<span class="sd">        strList (str): A string representation of a list of numbers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list of float values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">strList</span> <span class="o">=</span> <span class="n">strList</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">strList</span> <span class="o">=</span> <span class="n">strList</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">strList</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span></div>


<div class="viewcode-block" id="xmlIndent">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.xmlIndent">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">xmlIndent</span><span class="p">(</span><span class="n">elem</span><span class="p">:</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Indent an XML element for pretty printing.</span>

<span class="sd">    Args:</span>
<span class="sd">        elem (ET.Element): The XML element to indent.</span>
<span class="sd">        level (int, optional): The current indentation level. Defaults to 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">level</span><span class="o">*</span><span class="s2">&quot;  &quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="s2">&quot;  &quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">:</span>
            <span class="n">xmlIndent</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">strip</span><span class="p">()):</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">i</span></div>


<span class="k">def</span><span class="w"> </span><span class="nf">__buildFileName</span><span class="p">(</span><span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">idNumber</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">extn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">number_of_digits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build a file name from a prefix, ID number, and extension.</span>

<span class="sd">    Args:</span>
<span class="sd">        prefix (str): The prefix of the file name.</span>
<span class="sd">        idNumber (int): The ID number of the file.</span>
<span class="sd">        extn (str): The extension of the file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The file name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">idNumber</span><span class="si">:</span><span class="s1">0</span><span class="si">{</span><span class="n">number_of_digits</span><span class="si">}</span><span class="s1">d</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">if</span> <span class="n">extn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
        <span class="n">extn</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">extn</span>
    <span class="n">fileName</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">ids</span> <span class="o">+</span> <span class="n">extn</span>
    <span class="k">return</span> <span class="n">fileName</span>

<div class="viewcode-block" id="findAndReplaceTextInFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.findAndReplaceTextInFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">findAndReplaceTextInFile</span><span class="p">(</span><span class="n">fileIn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">txtFind</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">txtReplace</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find and replace text in a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileIn (str): The input file path.</span>
<span class="sd">        txtFind (str): The text to find.</span>
<span class="sd">        txtReplace (str): The text to replace with.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path of the modified file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileIn</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="n">fileData</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">fileData</span> <span class="o">=</span> <span class="n">fileData</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">txtFind</span><span class="p">,</span> <span class="n">txtReplace</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileIn</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fileData</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fileIn</span></div>


<div class="viewcode-block" id="readFileToListOfLines">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readFileToListOfLines">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readFileToListOfLines</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">commentSymbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a file and return a list of each line.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The path of the file to read.</span>
<span class="sd">        commentSymbol (str, optional): The symbol used to denote comments. Defaults to &#39;#&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[List[str]]: A list of lines from the file.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Will split on &quot;,&quot; if present</span>
<span class="sd">        - Will skip starting with #</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span> <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="n">commentSymbol</span><span class="p">]</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">lines</span></div>

 
<div class="viewcode-block" id="appendFiles">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.appendFiles">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">appendFiles</span><span class="p">(</span><span class="n">listOfFiles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">carriageReturn</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append the contents of multiple text files into a single string.</span>

<span class="sd">    Args:</span>
<span class="sd">        listOfFiles (list): A list of file names to append.</span>
<span class="sd">        carriageReturn (str, optional): The string to append after each file&#39;s content. Defaults to an empty string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A single string containing the concatenated contents of all files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">iFile</span> <span class="ow">in</span> <span class="n">listOfFiles</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">iFile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fileData</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">allText</span> <span class="o">=</span> <span class="n">allText</span> <span class="o">+</span> <span class="n">fileData</span> <span class="o">+</span> <span class="n">carriageReturn</span>
    <span class="k">return</span> <span class="n">allText</span></div>


<div class="viewcode-block" id="pickleData">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pickleData">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pickleData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pickleFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pickle data to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The data to pickle.</span>
<span class="sd">        pickleFileName (str): The name of the file to pickle to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The name of the file written to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pickleFileName</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pickleFileName</span></div>


<div class="viewcode-block" id="unpickleData">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.unpickleData">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">unpickleData</span><span class="p">(</span><span class="n">pickleFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unpickle data from a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pickleFileName (str): The name of the file to unpickle.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The unpickled data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;encoding&quot;</span><span class="p">:</span><span class="s1">&#39;latin1&#39;</span><span class="p">}</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pickleFileName</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span></div>



<div class="viewcode-block" id="tarGZLocal_AndMove">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.tarGZLocal_AndMove">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">tarGZLocal_AndMove</span><span class="p">(</span><span class="n">dirToTarZip</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tarGZFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">localLocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">remoteLocation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compress and move a directory to a local location and optionally to a remote location.</span>
<span class="sd">    Uses Python&#39;s tarfile module for cross-platform compatibility.</span>

<span class="sd">    Args:</span>
<span class="sd">        dirToTarZip (str): The directory to compress and zip.</span>
<span class="sd">        tarGZFileName (str): The name of the compressed file.</span>
<span class="sd">        localLocation (str): The local location to move the compressed file.</span>
<span class="sd">        remoteLocation (str, optional): The remote location to move the compressed file. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the parent directory and target directory name</span>
    <span class="n">parent_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dirToTarZip</span><span class="p">)</span>
    <span class="n">target_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dirToTarZip</span><span class="p">)</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">localLocation</span><span class="p">,</span> <span class="n">tarGZFileName</span><span class="p">)</span>
    
    <span class="c1"># Create tar.gz archive</span>
    <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s2">&quot;w:gz&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
        <span class="c1"># Change to parent directory to get relative paths</span>
        <span class="n">original_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tar</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">target_dir</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">original_dir</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">remoteLocation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">remoteLocation</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span></div>



<span class="c1"># =========================================================================</span>
<span class="c1"># =========================================================================</span>
<div class="viewcode-block" id="addSuffixToName">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.addSuffixToName">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">addSuffixToName</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a suffix to the end of a file name (retains extn).</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The name of the file to modify.</span>
<span class="sd">        suffix (str): The suffix to add to the file name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The modified file name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fileName</span><span class="p">,</span> <span class="n">fileExt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">fSplit</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">fSplit</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">fileName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span> <span class="o">+</span> <span class="n">fileExt</span></div>


<div class="viewcode-block" id="checkIfExtnPresent">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.checkIfExtnPresent">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">checkIfExtnPresent</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extn</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the extension of a file name is present and add it if it is not.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The name of the file to check.</span>
<span class="sd">        extn (str): The extension to check for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The modified file name with the extension added if it was not present.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">extn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="n">extn</span> <span class="o">=</span> <span class="n">extn</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">le</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">extn</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fileName</span><span class="p">[</span><span class="o">-</span><span class="n">le</span><span class="p">:]</span> <span class="o">!=</span> <span class="n">extn</span><span class="p">):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">extn</span>
    <span class="k">return</span> <span class="n">fileName</span></div>



<span class="c1"># =========================================================================</span>
<span class="c1">##          CSV interface</span>
<span class="c1"># =========================================================================</span>

<div class="viewcode-block" id="readDataCSV">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readDataCSV">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readDataCSV</span><span class="p">(</span><span class="n">csvFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">quotechar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">decimalChar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">delimeterToUse</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read data from a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        csvFile (str): The path of the CSV file to read.</span>
<span class="sd">        nHeaderLines (int, optional): The number of header lines to skip. Defaults to 0.</span>
<span class="sd">        quotechar (str, optional): The character used to quote fields. Defaults to &#39;&quot;&#39;.</span>
<span class="sd">        decimalChar (str, optional): The character used to denote decimal points. Defaults to &#39;.&#39;.</span>
<span class="sd">        delimeterToUse (str, optional): The delimiter to use. If not specified, it will be detected automatically.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[List[str], List[List[str]]]: A tuple containing the headers and the data.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Assumes Headers: then cols of floats</span>
<span class="sd">        - Try to automatically determine detectDelimiter</span>
<span class="sd">        - Read file (skip header lines)</span>
<span class="sd">        Return last headers row as list of headers (if so) &amp; list of lists of each row</span>
<span class="sd">        Can pass output to np.array() then have columns of data</span>
<span class="sd">            e.g. : data = np.array(data, dtype=float)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__fixDecimal</span><span class="p">(</span><span class="n">irow</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">decimalChar</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
            <span class="n">rowOut</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">irow</span><span class="p">:</span>
                <span class="n">i2</span> <span class="o">=</span> <span class="n">ii</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">decimalChar</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
                    <span class="n">rowOut</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">rowOut</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">rowOut</span>
        <span class="k">return</span> <span class="n">irow</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">doReading</span><span class="p">(</span><span class="n">delimeterToUse_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">infile</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">quotechar</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimeterToUse_</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="n">quotechar</span><span class="p">)</span>
        <span class="c1"># ASSUME ALWAYS SAME ROW FORMAT</span>
        <span class="n">rowsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">rowCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">rowCount</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">rowCount</span> <span class="o">&lt;=</span> <span class="n">nHeaderLines</span><span class="p">:</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="n">row</span>
                <span class="k">continue</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">__fixDecimal</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="n">rowsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">headers</span><span class="p">,</span> <span class="n">rowsList</span>
    <span class="k">if</span> <span class="n">delimeterToUse</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">delimeterToUse</span> <span class="o">=</span> <span class="n">detectDelimiter</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
            <span class="n">delimeterToUse</span> <span class="o">=</span> <span class="n">detectDelimiter</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">,</span> <span class="s1">&#39;utf16&#39;</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="s1">&#39;rU&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">,</span> <span class="n">rowsList</span> <span class="o">=</span> <span class="n">doReading</span><span class="p">(</span><span class="n">delimeterToUse</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">infile</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">,</span> <span class="n">quotechar</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">Error</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="s1">&#39;rU&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-16&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">,</span> <span class="n">rowsList</span> <span class="o">=</span> <span class="n">doReading</span><span class="p">(</span><span class="n">delimeterToUse</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">infile</span><span class="p">,</span> <span class="n">nHeaderLines</span><span class="p">,</span> <span class="n">quotechar</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">headers</span><span class="p">,</span> <span class="n">rowsList</span></div>



<div class="viewcode-block" id="writeCSVFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeCSVFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeCSVFile</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">header</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">csvFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FIX_NAN</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write data to a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (List[List[str]]): The data to write to the CSV file.</span>
<span class="sd">        header (List[str]): The header for the CSV file.</span>
<span class="sd">        csvFile (str): The path of the CSV file to write to.</span>
<span class="sd">        FIX_NAN (bool, optional): Whether to fix NaN values. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path of the CSV file written to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fout</span><span class="p">:</span>
        <span class="n">csvWriter</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">fout</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">)</span>
        <span class="c1">#first write column headers</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">csvWriter</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">iRow</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">FIX_NAN</span><span class="p">:</span>
                <span class="n">iRow</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="s1">&#39;nan&#39;</span> <span class="k">else</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iRow</span><span class="p">]</span>
            <span class="n">csvWriter</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">iRow</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csvFile</span></div>



<div class="viewcode-block" id="detectDelimiter">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.detectDelimiter">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">detectDelimiter</span><span class="p">(</span><span class="n">csvFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">nHeader</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Detect the delimiter used in a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        csvFile (str): The path of the CSV file to detect the delimiter of.</span>
<span class="sd">        nHeader (int, optional): The number of header lines to skip. Defaults to 0.</span>
<span class="sd">        encoding (str, optional): The encoding of the file. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The detected delimiter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csvFile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">myCsvfile</span><span class="p">:</span>
        <span class="n">c0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">myCsvfile</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">c0</span> <span class="o">&lt;=</span> <span class="n">nHeader</span><span class="p">:</span>
                <span class="n">c0</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;,&quot;</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;;&quot;</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;,&quot;</span></div>



<span class="c1"># =========================================================================</span>
<span class="c1">##          PLY interface</span>
<span class="c1"># =========================================================================</span>

<div class="viewcode-block" id="writePlyFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writePlyFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writePlyFile</span><span class="p">(</span><span class="n">fullfileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">xyzPoints</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span> <span class="n">uvwPoints</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Written via fIO module&quot;</span><span class="p">],</span> <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write points and norms to PLY file</span>
<span class="sd">    :param fullfileName:</span>
<span class="sd">    :param xyzPoints:</span>
<span class="sd">    :param uvwPoints:</span>
<span class="sd">    :param comment:</span>
<span class="sd">    :param header:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FORMAT EXAMPLE :</span>
    <span class="c1"># ply</span>
    <span class="c1"># format ascii 1.0           { ascii/binary, format version number }</span>
    <span class="c1"># comment made by Greg Turk  { comments keyword specified, like all lines }</span>
    <span class="c1"># comment this file is a cube</span>
    <span class="c1"># element vertex 8           { define &quot;vertex&quot; element, 8 of them in file }</span>
    <span class="c1"># property float x           { vertex contains float &quot;x&quot; coordinate }</span>
    <span class="c1"># property float y           { y coordinate is also a vertex property }</span>
    <span class="c1"># property float z           { z coordinate, too }</span>
    <span class="c1"># element face 6             { there are 6 &quot;face&quot; elements in the file }</span>
    <span class="c1"># property list uchar int vertex_index { &quot;vertex_indices&quot; is a list of ints }</span>
    <span class="c1"># end_header                 { delimits the end of the header }</span>
    <span class="c1"># 0 0 0                      { start of vertex list }</span>
    <span class="c1"># 0 0 1</span>
    <span class="c1"># 0 1 1</span>
    <span class="c1"># 0 1 0</span>
    <span class="c1"># 1 0 0</span>
    <span class="c1"># 1 0 1</span>
    <span class="c1"># 1 1 1</span>
    <span class="c1"># 1 1 0</span>
    <span class="c1"># 4 0 1 2 3                  { start of face list }</span>
    <span class="c1"># 4 7 6 5 4</span>
    <span class="c1"># 4 0 4 5 1</span>
    <span class="c1"># 4 1 5 6 2</span>
    <span class="c1"># 4 2 6 7 3</span>
    <span class="c1"># 4 3 7 4 0</span>
    <span class="c1"># -------------------</span>
    <span class="n">nPts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyzPoints</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullfileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ply</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;format ascii 1.0</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">icomment</span> <span class="ow">in</span> <span class="n">comment</span><span class="p">:</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;comment &#39;</span> <span class="o">+</span> <span class="n">icomment</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;element vertex </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nPts</span><span class="p">))</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float x</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float y</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float z</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">uvwPoints</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float nx</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float ny</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;property float nz</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;end_header</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">uvwPoints</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nPts</span><span class="p">):</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> \
                          <span class="p">(</span><span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> \
                           <span class="n">uvwPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">uvwPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">uvwPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">2</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nPts</span><span class="p">):</span>
                <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="s1"> </span><span class="si">%.7f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> \
                          <span class="p">(</span><span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">xyzPoints</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">2</span><span class="p">]))</span>
        <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="k">return</span> <span class="n">fullfileName</span></div>




<span class="c1"># =========================================================================</span>
<span class="c1">## vtkIO and PVD interface</span>
<span class="c1"># =========================================================================</span>
<div class="viewcode-block" id="writeVTKFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeVTKFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeVTKFile</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">,</span> <span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">STL_ASCII</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes a VTK object to a file. Uses the extension to determine the type of file to write.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (vtk.vtkDataObject): The VTK object to write to a file.</span>
<span class="sd">        fileName (str): The full file name to write to.</span>
<span class="sd">        STL_ASCII (bool, optional): Set to True to write STL file in ASCII [default False -&gt; write binary] (only used for STL).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The full file name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtp&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLPolyDataWriter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vts&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLStructuredGridWriter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtu&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLUnstructuredGridWriter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;stl&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkSTLWriter</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">STL_ASCII</span><span class="p">:</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">SetFileTypeToASCII</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">SetFileTypeToBinary</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vti&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLImageDataWriter</span><span class="p">()</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">SetDataModeToBinary</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;mhd&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkMetaImageWriter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;mha&#39;</span><span class="p">):</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkMetaImageWriter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;nii&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">writeNifti</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">GZIP_COMPRESS</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">writeNifti</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">fileName</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">GZIP_COMPRESS</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">##</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">writer</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;Extension not recognised (</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fileName</span></div>



<div class="viewcode-block" id="readVTKFile">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readVTKFile">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readVTKFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a VTK file - the extension is used to determine the type of file to read.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The path of the VTK file to read.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vtk.vtkDataObject: The VTK data object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;## ERROR: </span><span class="si">%s</span><span class="s1"> file not found&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtp&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLPolyDataReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vts&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLStructuredGridReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtu&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLUnstructuredGridReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;stl&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkSTLReader</span><span class="p">()</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">ScalarTagsOn</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;nii&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkNIFTIImageReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vti&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLImageDataReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtk&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkPolyDataReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;vtm&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLMultiBlockDataReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;nrrd&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkNrrdReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;mha&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;mhd&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkMetaImageReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkPNGReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;jpg&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;jpeg&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkJPEGReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;tiff&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkTIFFReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;ply&#39;</span><span class="p">):</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkPLYReader</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;pvd&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39; PVD - should use readPVD()&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39; not correct extension&#39;</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">reader</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">()</span></div>



<span class="c1"># =========================================================================</span>
<div class="viewcode-block" id="nii_to_niigz">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.nii_to_niigz">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">nii_to_niigz</span><span class="p">(</span><span class="n">nii_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compress a NIfTI file to a NIfTI.gz file.</span>

<span class="sd">    Args:</span>
<span class="sd">        nii_file (str): The path of the NIfTI file to compress.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path of the compressed NIfTI file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fOut_nii_gz</span> <span class="o">=</span> <span class="n">nii_file</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.nii.gz&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">nii_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_in</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fOut_nii_gz</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_out</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">f_in</span><span class="p">,</span> <span class="n">f_out</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">nii_file</span><span class="p">)</span>  <span class="c1"># Remove uncompressed file</span>
    <span class="k">return</span> <span class="n">fOut_nii_gz</span></div>



<div class="viewcode-block" id="writeNifti">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeNifti">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeNifti</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">,</span> <span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">GZIP_COMPRESS</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write a NIfTI file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (vtk.vtkDataObject): The VTK data object to write.</span>
<span class="sd">        fileName (str): The path of the NIfTI file to write to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path of the NIfTI file written to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkNIFTIImageWriter</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">GZIP_COMPRESS</span><span class="p">:</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">nii_to_niigz</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fileName</span></div>


<div class="viewcode-block" id="readNifti">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readNifti">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readNifti</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a NIfTI file.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The path of the NIfTI file to read.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vtk.vtkDataObject: The VTK data object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkNIFTIImageReader</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">reader</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">()</span></div>


<div class="viewcode-block" id="readNRRD">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readNRRD">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readNRRD</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a NRRD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileName (str): The path of the NRRD file to read.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vtk.vtkDataObject: The VTK data object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkNrrdReader</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">reader</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">()</span></div>

<span class="c1"># =========================================================================</span>


<span class="c1"># =========================================================================</span>
<span class="c1">##          PVD Stuff</span>
<span class="c1"># =========================================================================</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_writePVD</span><span class="p">(</span><span class="n">rootDirectory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">outputSummary</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write a PVD file. For internal use only.</span>

<span class="sd">    Args:</span>
<span class="sd">        rootDirectory (str): The root directory.</span>
<span class="sd">        filePrefix (str): The file prefix.</span>
<span class="sd">        outputSummary (Dict[int, Dict[str, Union[str, float]]]): The output summary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fileOut</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDirectory</span><span class="p">,</span> <span class="n">filePrefix</span> <span class="o">+</span> <span class="s1">&#39;.pvd&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileOut</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;VTKFile type=&quot;Collection&quot; version=&quot;0.1&quot; byte_order=&quot;LittleEndian&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;Collection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">timeId</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">outputSummary</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">sTrueTime</span> <span class="o">=</span> <span class="n">outputSummary</span><span class="p">[</span><span class="n">timeId</span><span class="p">][</span><span class="s1">&#39;TrueTime&#39;</span><span class="p">]</span>
            <span class="n">tFileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">outputSummary</span><span class="p">[</span><span class="n">timeId</span><span class="p">][</span><span class="s1">&#39;FileName&#39;</span><span class="p">])</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;DataSet timestep=&quot;</span><span class="si">%7.5f</span><span class="s1">&quot; file=&quot;</span><span class="si">%s</span><span class="s1">&quot;/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sTrueTime</span><span class="p">,</span> <span class="n">tFileName</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/Collection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/VTKFile&gt;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fileOut</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_makePVDOutputDict</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">],</span> <span class="n">filePrefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">subDir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make a PVD output dictionary. For internal use only.</span>

<span class="sd">    Args:</span>
<span class="sd">        vtkDict (Dict[Union[str, float], vtk.vtkDataObject]): The dictionary of VTK data objects.</span>
<span class="sd">        filePrefix (str): The file prefix.</span>
<span class="sd">        fileExtn (str): The file extension.</span>
<span class="sd">        subDir (str, optional): The subdirectory. Defaults to &#39;&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[int, Dict[str, Union[str, float]]]: The output summary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outputSummary</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">myKeys</span> <span class="o">=</span> <span class="n">vtkDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">myKeys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">myKeys</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">timeId</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">myKeys</span><span class="p">)):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">__buildFileName</span><span class="p">(</span><span class="n">filePrefix</span><span class="p">,</span> <span class="n">timeId</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">)</span>
        <span class="n">trueTime</span> <span class="o">=</span> <span class="n">myKeys</span><span class="p">[</span><span class="n">timeId</span><span class="p">]</span>
        <span class="n">outputMeta</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;FileName&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subDir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">),</span> <span class="s1">&#39;TimeID&#39;</span><span class="p">:</span> <span class="n">timeId</span><span class="p">,</span> <span class="s1">&#39;TrueTime&#39;</span><span class="p">:</span> <span class="n">trueTime</span><span class="p">}</span>
        <span class="n">outputSummary</span><span class="p">[</span><span class="n">timeId</span><span class="p">]</span> <span class="o">=</span> <span class="n">outputMeta</span>
    <span class="k">return</span> <span class="n">outputSummary</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__writePVDData</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">],</span> <span class="n">rootDir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">subDir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write PVD data. For internal use only.</span>

<span class="sd">    Args:</span>
<span class="sd">        vtkDict (Dict[Union[str, float], vtk.vtkDataObject]): The dictionary of VTK data objects.</span>
<span class="sd">        rootDir (str): The root directory.</span>
<span class="sd">        filePrefix (str): The file prefix.</span>
<span class="sd">        fileExtn (str): The file extension.</span>
<span class="sd">        subDir (str, optional): The subdirectory. Defaults to &#39;&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">myKeys</span> <span class="o">=</span> <span class="n">vtkDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">myKeys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">myKeys</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">timeId</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">myKeys</span><span class="p">)):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">__buildFileName</span><span class="p">(</span><span class="n">filePrefix</span><span class="p">,</span> <span class="n">timeId</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">)</span>
        <span class="n">fileOut</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">subDir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">[</span><span class="n">myKeys</span><span class="p">[</span><span class="n">timeId</span><span class="p">]])</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">[</span><span class="n">myKeys</span><span class="p">[</span><span class="n">timeId</span><span class="p">]],</span> <span class="n">fileOut</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">writeVTKFile</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">[</span><span class="n">myKeys</span><span class="p">[</span><span class="n">timeId</span><span class="p">]],</span> <span class="n">fileOut</span><span class="p">)</span>

<div class="viewcode-block" id="writeVTK_PVD_Dict">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeVTK_PVD_Dict">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeVTK_PVD_Dict</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">],</span> <span class="n">rootDir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">BUILD_SUBDIR</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write dict of time:vtkObj to pvd file</span>
<span class="sd">        If dict is time:fileName then will copy files</span>

<span class="sd">    Args:</span>
<span class="sd">        vtkDict (Dict[Union[str, float], vtk.vtkDataObject]): The dictionary of VTK data objects.</span>
<span class="sd">        rootDir (str): The root directory.</span>
<span class="sd">        filePrefix (str): make filePrefix.pvd</span>
<span class="sd">        fileExtn (str): file extension (e.g. vtp, vti, vts etc)</span>
<span class="sd">        BUILD_SUBDIR (bool, optional): to build subdir (filePrefix.pvd in root, then data in root/filePrefix/). Defaults to True.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        str: full file name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filePrefix</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filePrefix</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">subDir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">fullPVD</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">checkIfExtnPresent</span><span class="p">(</span><span class="n">filePrefix</span><span class="p">,</span> <span class="s1">&#39;pvd&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fullPVD</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">vtkDict</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">deleteFilesByPVD</span><span class="p">(</span><span class="n">fullPVD</span><span class="p">,</span> <span class="n">QUIET</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">BUILD_SUBDIR</span><span class="p">:</span>
        <span class="n">subDir</span> <span class="o">=</span> <span class="n">filePrefix</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">subDir</span><span class="p">)):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">subDir</span><span class="p">))</span>
    <span class="n">outputSummary</span> <span class="o">=</span> <span class="n">_makePVDOutputDict</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">,</span> <span class="n">subDir</span><span class="p">)</span>
    <span class="n">__writePVDData</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">,</span> <span class="n">rootDir</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">,</span> <span class="n">fileExtn</span><span class="p">,</span> <span class="n">subDir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_writePVD</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">filePrefix</span><span class="p">,</span> <span class="n">outputSummary</span><span class="p">)</span></div>



<div class="viewcode-block" id="pvdAddTimeToFieldData">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdAddTimeToFieldData">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdAddTimeToFieldData</span><span class="p">(</span><span class="n">pvdf_or_vtkDict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add time to field data.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdf_or_vtkDict (Union[str, Dict[Union[str, float], vtk.vtkDataObject]]): The PVD file path or dictionary of VTK data objects.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Union[str, Dict[Union[str, float], vtk.vtkDataObject]]: The PVD file path or dictionary of VTK data objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rr</span><span class="p">,</span> <span class="n">ff</span><span class="p">,</span> <span class="n">ee</span> <span class="o">=</span> <span class="n">pvdGetDataFileRoot_Prefix_and_Ext</span><span class="p">(</span><span class="n">pvdf_or_vtkDict</span><span class="p">)</span>
    <span class="n">pvdf_or_vtkDict</span> <span class="o">=</span> <span class="n">readPVD</span><span class="p">(</span><span class="n">pvdf_or_vtkDict</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">iTime</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pvdf_or_vtkDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">timeArray</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkFloatArray</span><span class="p">()</span>
        <span class="n">timeArray</span><span class="o">.</span><span class="n">SetNumberOfValues</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">timeArray</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">iTime</span><span class="p">)</span>
        <span class="n">timeArray</span><span class="o">.</span><span class="n">SetName</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
        <span class="n">pvdf_or_vtkDict</span><span class="p">[</span><span class="n">iTime</span><span class="p">]</span><span class="o">.</span><span class="n">GetFieldData</span><span class="p">()</span><span class="o">.</span><span class="n">AddArray</span><span class="p">(</span><span class="n">timeArray</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">writeVTK_PVD_Dict</span><span class="p">(</span><span class="n">pvdf_or_vtkDict</span><span class="p">,</span> <span class="n">rr</span><span class="p">,</span> <span class="n">ff</span><span class="p">,</span> <span class="n">ee</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pvdf_or_vtkDict</span></div>




<div class="viewcode-block" id="writeZipFromVTK_PVD_Dict">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.writeZipFromVTK_PVD_Dict">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">writeZipFromVTK_PVD_Dict</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">],</span> <span class="n">fileExt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">zipFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write a ZIP file from a dictionary of VTK data objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        vtkDict (Dict[Union[str, float], vtk.vtkDataObject]): The dictionary of VTK data objects.</span>
<span class="sd">        fileExt (str): The file extension.</span>
<span class="sd">        zipFileOut (str): The output ZIP file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># first save times to field data</span>
    <span class="n">pvdAddTimeToFieldData</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">)</span>
    <span class="c1"># write as normal, then zip, then del.</span>
    <span class="n">r</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">zipFileOut</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">pvdOut</span> <span class="o">=</span> <span class="n">writeVTK_PVD_Dict</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">fileExt</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zipFileOut</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;.zip&#39;</span><span class="p">:</span>
        <span class="n">zipFileOut</span> <span class="o">=</span> <span class="n">zipFileOut</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="n">zipFileOut</span><span class="p">,</span> <span class="s1">&#39;zip&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
    <span class="n">deleteFilesByPVD</span><span class="p">(</span><span class="n">pvdOut</span><span class="p">)</span></div>



<div class="viewcode-block" id="deleteFilesByPVD">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.deleteFilesByPVD">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">deleteFilesByPVD</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">FILE_ONLY</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">QUIET</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete files referenced by a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The PVD file path.</span>
<span class="sd">        FILE_ONLY (bool, optional): Whether to delete only the files. Defaults to False.</span>
<span class="sd">        QUIET (bool, optional): Whether to suppress warnings. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if successful, 1 if error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">FILE_ONLY</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    warning - file not found </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pvdFile</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pvdDict</span> <span class="o">=</span> <span class="n">readPVDFileName</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">iKey</span> <span class="ow">in</span> <span class="n">pvdDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pvdDict</span><span class="p">[</span><span class="n">iKey</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># ignore this as may be shared by and deleted by another pvd</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">QUIET</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="s2">&quot;pvd&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pvdFile</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    warning - file not found </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pvdFile</span><span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">head</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">QUIET</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    warning - dir not found </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">head</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">0</span></div>



<div class="viewcode-block" id="readPVDFileName">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readPVDFileName">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readPVDFileName</span><span class="p">(</span><span class="n">fileIn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vtpTime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">timeIDs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">RETURN_OBJECTS_DICT</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read PVD file, return dictionary of fullFileNames - keys = time</span>
<span class="sd">    So DOES NOT read file</span>
<span class="sd">    If not pvd - will return dict of {0.0 : fileName}</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        fileIn: str - PVD file path</span>
<span class="sd">        vtpTime: float - time to read</span>
<span class="sd">        timeIDs: list of int - time IDs to read</span>
<span class="sd">        RETURN_OBJECTS_DICT: bool - return dictionary of vtkDataObjects</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        dict of fullFileNames - keys = time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fileIn</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ext</span> <span class="o">!=</span> <span class="s1">&#39;.pvd&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">RETURN_OBJECTS_DICT</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">vtpTime</span><span class="p">:</span> <span class="n">readVTKFile</span><span class="p">(</span><span class="n">fileIn</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">vtpTime</span><span class="p">:</span> <span class="n">fileIn</span><span class="p">}</span>
    <span class="c1">#</span>
    <span class="n">vtkDict</span> <span class="o">=</span> <span class="n">pvdGetDict</span><span class="p">(</span><span class="n">fileIn</span><span class="p">,</span> <span class="n">timeIDs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">RETURN_OBJECTS_DICT</span><span class="p">:</span>
        <span class="n">kk</span> <span class="o">=</span> <span class="n">vtkDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span> <span class="p">[</span><span class="n">readVTKFile</span><span class="p">(</span><span class="n">vtkDict</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kk</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">vtkDict</span></div>


<div class="viewcode-block" id="readImageFileToDict">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readImageFileToDict">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readImageFileToDict</span><span class="p">(</span><span class="n">imageFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read an image file and return a dictionary of VTK data objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        imageFile (str): The image file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[float, vtk.vtkDataObject]: A dictionary of VTK data objects (keys = time).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">readPVD</span><span class="p">(</span><span class="n">imageFile</span><span class="p">)</span></div>


<div class="viewcode-block" id="readPVD">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.readPVD">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">readPVD</span><span class="p">(</span><span class="n">fileIn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeIDs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a PVD file and return a dictionary of VTK data objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        fileIn (str): The PVD file path.</span>
<span class="sd">        timeIDs (List[int], optional): A list of time step IDs to include. Defaults to an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[float, vtk.vtkDataObject]: A dictionary of VTK data objects (keys = time).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">readPVDFileName</span><span class="p">(</span><span class="n">fileIn</span><span class="p">,</span> <span class="n">timeIDs</span><span class="o">=</span><span class="n">timeIDs</span><span class="p">,</span> <span class="n">RETURN_OBJECTS_DICT</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="pvdGetDict">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetDict">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetDict</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">timeIDs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a dictionary of time steps and their corresponding file names from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>
<span class="sd">        timeIDs (List[int], optional): A list of time step IDs to include. Defaults to an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[float, str]: A dictionary mapping time steps to file names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pvd</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">pvd</span>
    <span class="n">nTSteps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timeIDs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">timeIDs</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">nTSteps</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">k1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">timeIDs</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">timeIDs</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">timeIDs</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nTSteps</span> <span class="o">+</span> <span class="n">timeIDs</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span>
    <span class="n">pvdTimesFilesDict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">rootDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nTSteps</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">timeIDs</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">root</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span>
        <span class="n">fullVtkFileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootDir</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
        <span class="n">pvdTimesFilesDict</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">])]</span> <span class="o">=</span> <span class="n">fullVtkFileName</span>
    <span class="k">return</span> <span class="n">pvdTimesFilesDict</span></div>


<div class="viewcode-block" id="pvdGetClosestTimeToT">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetClosestTimeToT">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetClosestTimeToT</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">T</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the time step closest to a given time from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>
<span class="sd">        T (float): The target time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The closest time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdDict</span> <span class="o">=</span> <span class="n">pvdGetDict</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="n">tt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">pvdDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
    <span class="k">return</span> <span class="n">tt</span><span class="p">[</span><span class="n">pvdGetIdOfT</span><span class="p">(</span><span class="n">pvdDict</span><span class="p">,</span> <span class="n">T</span><span class="p">)]</span></div>


<div class="viewcode-block" id="pvdGetTimes">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetTimes">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetTimes</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of time steps from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: A list of time steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdDict</span> <span class="o">=</span> <span class="n">pvdGetDict</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="n">tt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">pvdDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
    <span class="k">return</span> <span class="n">tt</span></div>


<div class="viewcode-block" id="pvdGetIdOfT">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetIdOfT">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetIdOfT</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">T</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the ID of the time step closest to a given time from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>
<span class="sd">        T (float): The target time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The ID of the closest time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdDict</span> <span class="o">=</span> <span class="n">pvdGetDict</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">pvdDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span><span class="o">-</span><span class="n">T</span><span class="p">))</span></div>


<div class="viewcode-block" id="pvdGetFileAtT">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetFileAtT">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetFileAtT</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">T</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the file name corresponding to the time step closest to a given time from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>
<span class="sd">        T (float): The target time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The file name corresponding to the closest time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdDict</span> <span class="o">=</span> <span class="n">pvdGetDict</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdDict</span><span class="p">[</span><span class="n">pvdGetClosestTimeToT</span><span class="p">(</span><span class="n">pvdDict</span><span class="p">,</span> <span class="n">T</span><span class="p">)]</span></div>


<div class="viewcode-block" id="pvdGetNumberTimePoints">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetNumberTimePoints">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetNumberTimePoints</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the number of time points in a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The number of time points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">readPVDFileName</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="pvdGetDataFileRoot_Prefix_and_Ext">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetDataFileRoot_Prefix_and_Ext">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetDataFileRoot_Prefix_and_Ext</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the root directory, prefix, and extension of the data files referenced in a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[str, str, str]: A tuple containing the root directory, prefix, and extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pvd</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">t</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ff</span> <span class="o">=</span> <span class="n">pvdGetFileAtT</span><span class="p">(</span><span class="n">pvd</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">ff</span> <span class="o">=</span> <span class="n">pvd</span>
    <span class="k">return</span> <span class="n">h</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">ff</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>


<div class="viewcode-block" id="pvdGetDataClosestTo">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdGetDataClosestTo">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdGetDataClosestTo</span><span class="p">(</span><span class="n">pvd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">refT</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDataObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the data object corresponding to the time step closest to a given reference time from a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvd (Union[str, ET.Element, Dict[float, str]]): The PVD file path, XML element, or dictionary.</span>
<span class="sd">        refT (float): The reference time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vtk.vtkDataObject: The data object corresponding to the closest time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">closestT</span> <span class="o">=</span> <span class="n">pvdGetClosestTimeToT</span><span class="p">(</span><span class="n">pvd</span><span class="p">,</span> <span class="n">refT</span><span class="p">)</span>
    <span class="n">xID</span> <span class="o">=</span> <span class="n">pvdGetIdOfT</span><span class="p">(</span><span class="n">pvd</span><span class="p">,</span> <span class="n">closestT</span><span class="p">)</span>
    <span class="n">dd</span> <span class="o">=</span> <span class="n">readPVD</span><span class="p">(</span><span class="n">pvd</span><span class="p">,</span> <span class="p">[</span><span class="n">xID</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">dd</span><span class="p">[</span><span class="n">closestT</span><span class="p">]</span></div>


<div class="viewcode-block" id="pvdMultiply">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdMultiply">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdMultiply</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">nCycles</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">outputFileName</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiply the time steps in a PVD file by a given number of cycles.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        nCycles (int): The number of cycles to multiply the time steps by.</span>
<span class="sd">        outputFileName (Optional[str], optional): The output PVD file path. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timeList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;DataSet&#39;</span><span class="p">):</span>
        <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]))</span>
        <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">timeList</span><span class="p">,</span> <span class="n">fileList</span><span class="p">))]</span>  <span class="c1"># @UnusedVariable</span>
    <span class="n">timeList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">nTS</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">timeList</span><span class="p">)</span>
    <span class="n">nominalInterval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]))</span>
    <span class="n">timeMax</span> <span class="o">=</span> <span class="p">(</span><span class="n">nCycles</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">nominalInterval</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">nCycles</span><span class="p">)</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
            <span class="n">timeMax</span> <span class="o">=</span> <span class="n">nCycles</span> <span class="o">*</span> <span class="n">nominalInterval</span>
            <span class="n">nCycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">nCycles</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nCycles</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">nCycles</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">for</span> <span class="n">k1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nCycles</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k2</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nTS</span><span class="p">):</span>
            <span class="n">newTime</span> <span class="o">=</span> <span class="p">(</span><span class="n">nominalInterval</span> <span class="o">*</span> <span class="n">k1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="n">k2</span><span class="p">])</span>
            <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newTime</span><span class="p">))</span>
            <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileList</span><span class="p">[</span><span class="n">k2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nTS</span><span class="p">,</span> <span class="n">nTS</span> <span class="o">*</span> <span class="p">(</span><span class="n">nCycles</span><span class="p">)):</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;DataSet&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">timeMax</span><span class="p">:</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;timestep&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">collectionTag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">outputFileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outputFileName</span> <span class="o">=</span> <span class="n">pvdFile</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nCycles</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;cycles.pvd&#39;</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">);</span><span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outputFileName</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">outputFileName</span></div>


<div class="viewcode-block" id="pvdReverse">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdReverse">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdReverse</span><span class="p">(</span><span class="n">pvdFileIn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;REV&quot;</span><span class="p">,</span> <span class="n">outfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reverse the time steps in a PVD file.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFileIn (str): The input PVD file path.</span>
<span class="sd">        suffix (str, optional): The suffix to append to the output file name. Defaults to &quot;REV&quot;.</span>
<span class="sd">        outfile (Optional[str], optional): The output file path. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdFileOut</span> <span class="o">=</span> <span class="n">pvdFileIn</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">suffix</span> <span class="o">+</span> <span class="s1">&#39;.pvd&#39;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFileIn</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timeList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
        <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
        <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">])</span>
    <span class="n">sortId</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">timeList</span><span class="p">))</span>
    <span class="n">sortRevId</span> <span class="o">=</span> <span class="n">sortId</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">)):</span>
        <span class="n">root</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">root</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">sortRevId</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
    <span class="n">root</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">);</span>
    <span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pvdD</span> <span class="o">=</span> <span class="n">readPVD</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">e</span> <span class="o">=</span> <span class="n">pvdGetDataFileRoot_Prefix_and_Ext</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">)</span>
        <span class="n">outR</span><span class="p">,</span> <span class="n">outP</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="n">outP</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">outP</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">deleteFilesByPVD</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">,</span><span class="n">FILE_ONLY</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">pvdFileOut</span> <span class="o">=</span> <span class="n">writeVTK_PVD_Dict</span><span class="p">(</span><span class="n">pvdD</span><span class="p">,</span> <span class="n">outR</span><span class="p">,</span> <span class="n">outP</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdFileOut</span></div>


<div class="viewcode-block" id="pvdRestart_t">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdRestart_t">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdRestart_t</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeStart</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Restart a PVD file from a given time.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        timeStart (float): The start time.</span>
<span class="sd">        outputFile (Optional[str], optional): The output PVD file path. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">idStart</span> <span class="o">=</span> <span class="n">pvdGetIdOfT</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">,</span> <span class="n">timeStart</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdRestart</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">,</span> <span class="n">idStart</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">)</span></div>


<div class="viewcode-block" id="pvdRestart">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdRestart">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdRestart</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">idStart</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Restart a PVD file from a given time step ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        idStart (int): The start time step ID.</span>
<span class="sd">        outputFile (Optional[str], optional): The output PVD file path. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">iDataset</span> <span class="ow">in</span> <span class="n">collectionTag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;DataSet&#39;</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">idStart</span><span class="p">:</span>
            <span class="n">collectionTag</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">iDataset</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">outputFile</span><span class="p">:</span>
        <span class="n">outputFile</span> <span class="o">=</span> <span class="n">pvdFile</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">idStart</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;start.pvd&#39;</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outputFile</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">outputFile</span></div>


<div class="viewcode-block" id="pvdClip">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdClip">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdClip</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">idEnd</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clip a PVD file to a given time step ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        idEnd (int): The end time step ID.</span>
<span class="sd">        outputFile (Optional[str], optional): The output PVD file path. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">iDataset</span> <span class="ow">in</span> <span class="n">collectionTag</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;DataSet&#39;</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">idEnd</span><span class="p">:</span>
            <span class="n">collectionTag</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">iDataset</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">outputFile</span><span class="p">:</span>
        <span class="n">outputFile</span> <span class="o">=</span> <span class="n">pvdFile</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">idEnd</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;end.pvd&#39;</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outputFile</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">outputFile</span></div>


<div class="viewcode-block" id="pvdResetTimes">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdResetTimes">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdResetTimes</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">startTime</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">endTime</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the time steps in a PVD file to a given range.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        startTime (float): The start time.</span>
<span class="sd">        endTime (float): The end time.</span>
<span class="sd">        pvdFileOut (str): The output PVD file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timeList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">newTimes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">endTime</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">k1</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
        <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%5.5f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">newTimes</span><span class="p">[</span><span class="n">k1</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">)):</span>
        <span class="n">root</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">root</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">root</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">);</span>
    <span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdFileOut</span></div>


<div class="viewcode-block" id="pvdResetStartPoint_Id">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdResetStartPoint_Id">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdResetStartPoint_Id</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">startID</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the start point of a PVD file to a given time step ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        startID (int): The start time step ID.</span>
<span class="sd">        pvdFileOut (str): The output PVD file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">times</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">readPVDFileName</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">startTime</span> <span class="o">=</span><span class="n">times</span><span class="p">[</span><span class="n">startID</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">pvdResetStartPoint</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">,</span> <span class="n">startTime</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">,</span> <span class="n">QUIET</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="pvdResetStartPoint">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdResetStartPoint">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdResetStartPoint</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">startTime</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">QUIET</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the start point of a PVD file to a given time.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        startTime (float): The start time.</span>
<span class="sd">        pvdFileOut (str): The output PVD file path.</span>
<span class="sd">        QUIET (bool, optional): Whether to suppress output. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timeList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
        <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
        <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]))</span>
    <span class="n">idStart</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">startTime</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">timeList</span><span class="p">]))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">QUIET</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ressetting start ID to </span><span class="si">%d</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">idStart</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">k1</span><span class="p">,</span> <span class="n">ID</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">idStart</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">))):</span>
        <span class="n">root</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%5.5f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="n">k1</span><span class="p">])</span>
        <span class="n">root</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">ID</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">k2</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idStart</span><span class="p">):</span>
        <span class="n">root</span><span class="p">[</span><span class="n">k1</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">k2</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%5.5f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="n">k2</span><span class="o">+</span><span class="n">k1</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">root</span><span class="p">[</span><span class="n">k1</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">k2</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">k2</span><span class="p">]</span>
    <span class="n">root</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">);</span>
    <span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdFileOut</span></div>


<div class="viewcode-block" id="pvdAddStartPointAtEndForPeriodicy">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.pvdAddStartPointAtEndForPeriodicy">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">pvdAddStartPointAtEndForPeriodicy</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a start point at the end of a PVD file for periodicity.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFile (str): The input PVD file path.</span>
<span class="sd">        pvdFileOut (str): The output PVD file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output PVD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pvdTree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">pvdFile</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">)</span>
    <span class="n">nSteps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timeList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
        <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
        <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;timestep&#39;</span><span class="p">]))</span>
    <span class="n">fileList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">root</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
    <span class="n">lastTime</span> <span class="o">=</span> <span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timeList</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">timeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastTime</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="k">for</span> <span class="n">iDataset</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;DataSet&#39;</span><span class="p">):</span>
        <span class="n">root</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">iDataset</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="k">for</span> <span class="n">k1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fileList</span><span class="p">)):</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;DataSet&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileList</span><span class="p">[</span><span class="n">k1</span><span class="p">]</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;timestep&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%5.5f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">timeList</span><span class="p">[</span><span class="n">k1</span><span class="p">])</span>
        <span class="n">root</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">)</span>
    <span class="n">collectionTag</span> <span class="o">=</span> <span class="n">pvdTree</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Collection&#39;</span><span class="p">);</span><span class="n">xmlIndent</span><span class="p">(</span><span class="n">collectionTag</span><span class="p">)</span>
    <span class="n">pvdTree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pvdFileOut</span></div>


<div class="viewcode-block" id="buildPVD_WaterFallRestarts">
<a class="viewcode-back" href="../../api/fIO.html#ngawari.fIO.buildPVD_WaterFallRestarts">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">buildPVD_WaterFallRestarts</span><span class="p">(</span><span class="n">pvdFileIn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">restartEvery</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nCycle</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">TO_REV</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build a waterfall of restarted PVD files.</span>

<span class="sd">    Args:</span>
<span class="sd">        pvdFileIn (str): The input PVD file path.</span>
<span class="sd">        pvdFileOut (str): The output PVD file path.</span>
<span class="sd">        restartEvery (int): The number of time steps between restarts.</span>
<span class="sd">        nCycle (int, optional): The number of cycles. Defaults to 1.</span>
<span class="sd">        TO_REV (bool, optional): Whether to reverse the time steps. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: A list of output PVD file paths.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">pvdFileOut</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">)</span>
    <span class="n">pvdFileOut</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">pvdFileOut</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">pvdNCycleFile</span> <span class="o">=</span> <span class="n">pvdMultiply</span><span class="p">(</span><span class="n">pvdFileIn</span><span class="p">,</span> <span class="n">nCycle</span><span class="p">)</span>
    <span class="n">restartIds</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">readPVDFileName</span><span class="p">(</span><span class="n">pvdNCycleFile</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">restartEvery</span><span class="p">)</span>
    <span class="n">allFilesList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">outputSummary</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k1</span> <span class="ow">in</span> <span class="n">restartIds</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">TO_REV</span><span class="p">:</span>
            <span class="n">ttf</span> <span class="o">=</span> <span class="n">pvdNCycleFile</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-R.pvd&#39;</span>
            <span class="n">ttf</span> <span class="o">=</span> <span class="n">pvdRestart</span><span class="p">(</span><span class="n">ttf</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
            <span class="n">outputFile</span> <span class="o">=</span> <span class="n">pvdReverse</span><span class="p">(</span><span class="n">ttf</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="n">ttf</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outputFile</span> <span class="o">=</span> <span class="n">pvdRestart</span><span class="p">(</span><span class="n">pvdNCycleFile</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
        <span class="n">outputSummary</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">k1</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;TrueTime&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">k1</span><span class="p">),</span> <span class="s1">&#39;FileName&#39;</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">outputFile</span><span class="p">)[</span><span class="mi">1</span><span class="p">]}</span>
        <span class="n">allFilesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outputFile</span><span class="p">)</span>
    <span class="n">wrappingPVDFile</span> <span class="o">=</span> <span class="n">_writePVD</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">pvdFileOut</span><span class="p">,</span> <span class="n">outputSummary</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">allFilesList</span></div>


</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Fraser M. Callaghan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>